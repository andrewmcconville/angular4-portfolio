<div class="article flex flex-col flex-grow">
    <header class="header-bar--article flex-noshrink flex flex-start-center">
        <button (click)="openAppMenu()" role="button" aria-label="Main menu">
            <svg class="app-menu__icon">
                <use xlink:href="/assets/icons/icon-sprite.svg#hamburger-menu"></use>
            </svg>
        </button>
        <h1 class="header-bar__title">{{work.name}} {{work.name2}}</h1>
    </header>
    <article id="router-view" class="flex-grow flex-scroll--y" itemscope itemtype="https://schema.org/Article">
        <div class="article__shadow-box">
            <header class="article__header" [style.backgroundImage]="'url(/wp-content/uploads/' + work.backgroundBlur + '-blur-hi-res.jpg)'">
                <div class="article__header-inner">
                    <h1 class="article__header-title" itemprop="name">
                        <div>{{work.name}}</div>
                        <div>{{work.name2}}</div>
                    </h1>
                    <h2 class="article__header-subtitle" itemprop="description">{{work.description}}</h2>
                    <div class="article__header-meta flex flex-start-stretch">
                        <time [attr.datetime]="work.date" itemprop="datePublished" [attr.content]="work.date">{{work.date | date:'MMMM d, y'}}</time>                    
                        <span class="article__header-divider flex-noshrink"></span>
                        <span itemprop="author" >Andrew McConville</span>
                    </div>
                </div>
            </header>
            <div class="article__body" itemprop="articleBody">
                <section class="article__section" *ngFor="let section of work.sections">
                    <div class="article__copy">
                        <h3 class="article__subheading">{{section.name}}</h3>
                        <p class="article__paragraph" *ngFor="let paragraph of section.content">{{paragraph}}</p>
                    </div>
                    <blockquote class="blockquote" *ngIf="section.quote">
                        {{section.quote}}
                    </blockquote>
                    <figure class="article__figure" *ngIf="section.media">
                        <div class="article__image-container flex flex-center-start" *ngIf="section.media.type !== 'video'">
                            <a href="/wp-content/uploads/{{section.media.src}}" target="_blank" *ngIf="!section.media.hires">
                                <img class="article__image"
                                    [ngClass]="{'article__image-shadow': section.media.shadow}"
                                    [src]="'/wp-content/uploads/' + section.media.src"
                                    [alt]="section.media.caption"
                                    [height]="section.media.height" width="1500" />
                            </a>
                            <a href="/wp-content/uploads/{{section.media.hires}}" target="_blank" *ngIf="section.media.hires">
                                <img class="article__image"
                                    [ngClass]="{'article__image-shadow': section.media.shadow}"
                                    [src]="'/wp-content/uploads/' + section.media.src"
                                    [alt]="section.media.caption"
                                    [height]="section.media.height" width="1920" />
                            </a>
                        </div>
                        <div class="article__image-container flex flex-center-start" *ngIf="section.media.type === 'video'">
                            <video class="article__image" controls loop autoplay [height]="section.media.height" width="1500">
                                <source [src]="'/wp-content/uploads/' + section.media.src" type="video/mp4">
                                Your browser does not support HTML5 video.
                            </video>
                        </div>
                        <figcaption class="article__caption caption-text flex-noshrink">{{section.media.caption}}</figcaption>
                    </figure>
                </section>

                <div class="flex flex-center-center" *ngIf="work.link">
                    <a class="button article__live-project-link" [href]="work.link" target="_blank" rel="noopener">View it here</a>
                </div>
            </div>
        </div>
    </article>
</div>