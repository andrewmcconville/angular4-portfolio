<div class="article flex flex-col flex-grow">
    <header class="header-bar--article flex-noshrink flex flex-start-center">
        <button (click)="openAppMenu()">
            <svg class="app-menu__icon">
                <use xlink:href="/assets/icons/icon-sprite.svg#hamburger-menu"></use>
            </svg>
        </button>
        <h1 class="header-bar__title">{{work.name}}</h1>
    </header>
    <nav class="nav-bar--article flex flex-between-stretch flex-noshrink">
        <button class="nav-bar__tab flex-grow flex-50" (click)="prevWork()" role="button" aria-label="Previous page">prev</button>
        <span class="nav-bar__divider flex-noshrink"></span>
        <button class="nav-bar__tab flex-grow flex-50" (click)="nextWork()" role="button" aria-label="Next page">next</button>
    </nav>
    <article id="router-view"
            class="flex-grow flex-scroll--y article__scrollbar"
            [style.marginRight]="0 - scrollbarWidth + 'px'">
        <div class="article__shadow-box">
            <header class="article__header" [style.backgroundImage]="'url(/wp-content/uploads/' + work.defaultImage + '-blur.jpg)'">
                <h1 class="article__header-title">{{work.name}}</h1>
                <h2 class="article__header-subtitle">{{work.excerpt}}</h2>
                <div class="article__header-meta flex flex-start-stretch">
                    <time [attr.datetime]="work.date" itemprop="datePublished" [attr.content]="work.date">{{work.date | date:'yMMMMd'}}</time>                    
                    <span class="article__header-divider flex-noshrink"></span>
                    <a href="https://plus.google.com/+AndrewMcConville/" rel="author" itemprop="author" target="_blank">Andrew McConville</a>
                </div>
            </header>
            <div class="article__body">
                <p class="article__copy">{{work.introduction}}</p>

                <figure class="article__figure" *ngFor="let image of work.media">
                    <div class="article__image-container flex flex-center-start" *ngIf="image.type !== 'video'">
                        <img class="article__image"
                            [src]="'/wp-content/uploads/' + image.src"
                            [alt]="image.caption"
                            [height]="image.height" width="1500" />
                    </div>
                    <div  class="article__image-container flex flex-center-start" *ngIf="image.type === 'video'">
                        <video class="article__image" controls loop autoplay
                            [height]="image.height" width="1500">
                            <source [src]="'/wp-content/uploads/' + image.src" type="video/mp4">
                            Your browser does not support HTML5 video.
                        </video>
                    </div>
                    <figcaption class="article__caption caption-text flex-noshrink">{{image.caption}}</figcaption>
                </figure>

                <div class="flex flex-center-center" *ngIf="work.link">
                    <a [href]="work.link" target="_blank" rel="noopener">View it live</a>
                </div>
            </div>
        </div>
    </article>
    <div class="article__caption-mask"></div>
</div>